title: Release Branch Generator
summary: Creates a new release branch based on the  current week
description: Creates a new release branch based on the currrreent week
website: https://github.com/vielasis/bitrise-step-release-branch-generator
source_code_url: https://github.com/vielasis/bitrise-step-release-branch-generator
support_url: https://github.com/vielasis/bitrise-step-release-branch-generator/issues
host_os_tags:
  - osx-10.10
  - ubuntu-16.04

type_tags:
  - utility

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

deps:
  brew:
  - name: git
  - name: wget
  apt_get:
  - name: git
  - name: wget

toolkit:
  go:
    package_name: github.com/vielasis/bitrise-step-release-branch-generator

inputs:
  - ssh_key_save_path: "$HOME/.ssh/bitrise_step_activate_ssh_key"
    opts:
      title: Bitrise private key
      is_expand: true
      is_dont_change_value: true
  - git_repo_url:
    opts:
      title: Git repository URL (ssh)
      summary: Git repository URL (ssh)
      description: |
        URL of the Git repository (must be ssh)
      is_expand: true
      is_required: true
  - version_code_file: /buildscripts/dependencies.gradle
    opts:
      title: versionCode File
      summary: versionCode File
      description: |
        File where the versionCode is parsed
      is_expand: true
      is_required: true
  - release_branch_template: "{{with $newdate := .AddDate 0 0 7}}release/{{$newdate.Year}}w{{Week $newdate}}{{end}}"
    opts:
      title: Release Branch Template
      summary: Release Branch Template
      description: |
        Must be a valid go template
      is_expand: false
      is_required: true
  - version_code_template: "{{add . 1}}"
    opts:
      title: Version Code Template
      summary: Version Code Template
      description: |
        Must be a valid go template
      is_expand: false
      is_required: true
  - version_code_regex: "buildVersionCode"
    opts:
      title: Version Code Regex
      summary: Version Code Regex
      description: |
        Regex used to determine that the line from versionCode file contains the used versionCode
      is_expand: false
      is_required: true
  - tags_to_push:
    opts:
      title: Tags to push
      summary: Tags to push
      description: |
        Tags to be pushed, separate individual tags with a NEWLINE
      is_expand: false
      is_required: true

outputs:

